function initialize(){settings.map=new google.maps.Map(document.getElementById(settings.canvas),settings.mapOptions);settings.map.set("styles",[{featureType:"all",stylers:[{saturation:60}]}]);google.maps.event.addListener(settings.map,"click",function(b){a(b.latLng)});settings.areaPath=new google.maps.Polygon({strokeColor:"#FF0000",strokeOpacity:0.4,strokeWeight:3,fillColor:"#FF0000",fillOpacity:0.35,editable:true});google.maps.event.addListener(settings.map,"mouseout",function(){showCoordinates(settings.areaPath,settings.place)});showArea();function a(b){settings.area.push(b);showArea()}}var settings={area:[],areaPath:null,canvas:"map-canvas",map:null,place:"area-coordinates",mapOptions:{center:{lat:20.8723303,lng:55.765891},zoom:7,minZoom:6,maxZoom:11,mapTypeControl:false,streetViewControl:false,disableDoubleClickZoom:false}};function resetArea(){settings.areaPath.setMap(null);settings.area=[];settings.areaPath=new google.maps.Polygon({strokeColor:"#FF0000",strokeOpacity:0.4,strokeWeight:3,fillColor:"#FF0000",fillOpacity:0.35,editable:true});var a=document.getElementById(settings.place);a.value=""}function showArea(){if(settings.area.length>2){settings.areaPath.setPath(settings.area);settings.areaPath.setMap(settings.map);settings.area=[]}}function showCoordinates(c,d){var a="";var f=c.getPath();for(var b=0;b<f.getLength();b++){var e=f.getAt(b);a+="("+e.lat()+","+e.lng()+")@"}var g=document.getElementById(d);g.value=a.slice(0,-1)}function loadScript(){var a=document.getElementById("maps-script");if(a===null){var b=document.createElement("script");b.id="maps-script";b.type="text/javascript";b.src="https://maps.googleapis.com/maps/api/js?v=3.19exp&callback=initialize&language=en";document.body.appendChild(b)}else{initialize()}}function getCoordinates(){var k=document.getElementById("update-coordinates").value;var h=k.split("@");var e=0;var c=500;var g=0;var d=500;if(k.length>0){for(var f=0;f<h.length;f++){var b=h[f].split(",");var j=b[0].slice(1,b[0].length);e=((e>parseFloat(j))?e:parseFloat(j));c=((c<parseFloat(j))?c:parseFloat(j));var a=b[1].slice(0,-1);g=((g>parseFloat(a))?g:parseFloat(a));d=((d<parseFloat(a))?d:parseFloat(a));settings.area.push({lat:parseFloat(j),lng:parseFloat(a)})}settings.mapOptions.center={lat:(e+c)/2,lng:(g+d)/2}}}$(document).ready(function(){$("#edit-map").click(function(){$("#edit-map").hide();$("#update-canvas").show();settings.canvas="update-canvas";settings.place="update-coordinates";getCoordinates();loadScript()});$("#geolocation-close1, #geolocation-close2").click(function(){settings.canvas="map-canvas";settings.place="area-coordinates";settings.mapOptions.center={lat:20.8723303,lng:55.765891};resetArea()});$("#geolocation-reset1, #geolocation-reset2").click(function(){resetArea()})});